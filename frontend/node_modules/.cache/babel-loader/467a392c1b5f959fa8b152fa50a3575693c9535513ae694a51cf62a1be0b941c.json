{"ast":null,"code":"var _jsxFileName = \"/Users/bskong/tmp/db-agent/frontend/src/components/ChatComponent.js\",\n  _s = $RefreshSig$();\n// ChatComponent.js\n// 자연어→SQL, AI 통합 채팅 컴포넌트\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ChatComponent({\n  selectedDb,\n  databases,\n  onDbChange,\n  onResetChat\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [textareaRows, setTextareaRows] = useState(1);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  // 추천 질문들\n  const suggestedQuestions = ['오늘 가장 오래 걸린 쿼리 보여줘', '가장 row가 많은 테이블 알려줘', '슬로우 쿼리 10개만 보여줘', '테이블별 row 수와 크기 알려줘'];\n\n  // 자동 스크롤\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // 텍스트 영역 자동 크기 조정\n  const autoResizeTextarea = el => {\n    el.style.height = 'auto';\n    const newHeight = Math.min(el.scrollHeight, 120); // 최대 5줄\n    el.style.height = newHeight + 'px';\n    setTextareaRows(Math.ceil(newHeight / 24));\n  };\n\n  // 추천 질문 클릭\n  const handleSuggestedQuestion = question => {\n    var _textareaRef$current;\n    setInput(question);\n    (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : _textareaRef$current.focus();\n  };\n\n  // 메시지 전송\n  const handleSend = async () => {\n    if (!input.trim() || !selectedDb) return;\n    const userMessage = {\n      role: 'user',\n      content: input\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setLoading(true);\n    setInput('');\n    setTextareaRows(1);\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n    try {\n      const response = await fetch('/nl2sql', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: new URLSearchParams({\n          db_name: selectedDb,\n          prompt: input\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        const assistantMessage = {\n          role: 'assistant',\n          content: data.content || '',\n          sql: data.sql || '',\n          result: data.result || null\n        };\n        setMessages(prev => [...prev, assistantMessage]);\n      } else {\n        throw new Error('요청 실패');\n      }\n    } catch (error) {\n      const errorMessage = {\n        role: 'assistant',\n        content: '죄송합니다. 요청 처리 중 오류가 발생했습니다.',\n        error: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 키보드 이벤트 처리\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // 텍스트 영역 입력 처리\n  const handleInputChange = e => {\n    setInput(e.target.value);\n    autoResizeTextarea(e.target);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexGrow: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"db-select\",\n          className: \"prompt-label\",\n          children: \"DB \\uC120\\uD0DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"db-select\",\n          value: selectedDb || '',\n          onChange: e => onDbChange(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"DB\\uB97C \\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), databases === null || databases === void 0 ? void 0 : databases.map(db => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: db.name,\n            children: db.name\n          }, db.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onResetChat,\n        disabled: !selectedDb,\n        className: \"reset-btn\",\n        children: \"\\uB300\\uD654 \\uCD08\\uAE30\\uD654\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      id: \"chat-messages\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-box\",\n        children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"suggest-cards\",\n          children: suggestedQuestions.map((question, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"suggest-card\",\n            onClick: () => handleSuggestedQuestion(question),\n            children: question\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: msg.role === 'user' ? 'msg-user' : 'msg-ai',\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"msg-bubble\",\n            children: msg.role === 'user' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: msg.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [msg.content && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '8px'\n                },\n                dangerouslySetInnerHTML: {\n                  __html: msg.content\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 23\n              }, this), msg.sql && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sql-block\",\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"SQL\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: /*#__PURE__*/_jsxDEV(\"code\", {\n                    children: msg.sql\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 30\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 23\n              }, this), msg.result && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"result-block\",\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"\\uC2E4\\uD589 \\uACB0\\uACFC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 37\n                }, this), msg.result.headers && msg.result.data ? /*#__PURE__*/_jsxDEV(\"table\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: msg.result.headers.map((header, i) => /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: header\n                      }, i, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 35\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: msg.result.data.map((row, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: row.map((cell, j) => /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: cell\n                      }, j, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 186,\n                        columnNumber: 37\n                      }, this))\n                    }, i, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 33\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 27\n                }, this) : /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: /*#__PURE__*/_jsxDEV(\"code\", {\n                    children: JSON.stringify(msg.result, null, 2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 32\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 23\n              }, this), msg.error && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error-message\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#e74c3c'\n                  },\n                  children: [\"\\u26A0\\uFE0F \", msg.content]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msg-ai\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"msg-bubble\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-indicator\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"AI \\uC751\\uB2F5 \\uC0DD\\uC131 \\uC911...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textareaRef,\n        value: input,\n        onChange: handleInputChange,\n        onKeyDown: handleKeyDown,\n        rows: textareaRows,\n        placeholder: \"\\uC9C8\\uBB38\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694... (Shift+Enter\\uB85C \\uC904\\uBC14\\uAFC8)\",\n        disabled: !selectedDb || loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSend,\n        disabled: !input.trim() || !selectedDb || loading,\n        children: \"\\uC804\\uC1A1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatComponent, \"Grs9gm8lgJpr1QYjQzuAjC/lXQM=\");\n_c = ChatComponent;\nexport default ChatComponent;\nvar _c;\n$RefreshReg$(_c, \"ChatComponent\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatComponent","selectedDb","databases","onDbChange","onResetChat","_s","messages","setMessages","input","setInput","loading","setLoading","textareaRows","setTextareaRows","messagesEndRef","textareaRef","suggestedQuestions","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","autoResizeTextarea","el","style","height","newHeight","Math","min","scrollHeight","ceil","handleSuggestedQuestion","question","_textareaRef$current","focus","handleSend","trim","userMessage","role","content","prev","response","fetch","method","headers","body","URLSearchParams","db_name","prompt","ok","data","json","assistantMessage","sql","result","Error","error","errorMessage","handleKeyDown","e","key","shiftKey","preventDefault","handleInputChange","target","value","className","children","flexGrow","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","map","db","name","onClick","disabled","length","index","msg","idx","marginBottom","dangerouslySetInnerHTML","__html","header","i","row","cell","j","JSON","stringify","color","ref","onKeyDown","rows","placeholder","_c","$RefreshReg$"],"sources":["/Users/bskong/tmp/db-agent/frontend/src/components/ChatComponent.js"],"sourcesContent":["// ChatComponent.js\n// 자연어→SQL, AI 통합 채팅 컴포넌트\nimport React, { useState, useEffect, useRef } from 'react';\n\nfunction ChatComponent({ selectedDb, databases, onDbChange, onResetChat }) {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [textareaRows, setTextareaRows] = useState(1);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  // 추천 질문들\n  const suggestedQuestions = [\n    '오늘 가장 오래 걸린 쿼리 보여줘',\n    '가장 row가 많은 테이블 알려줘',\n    '슬로우 쿼리 10개만 보여줘',\n    '테이블별 row 수와 크기 알려줘'\n  ];\n\n  // 자동 스크롤\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // 텍스트 영역 자동 크기 조정\n  const autoResizeTextarea = (el) => {\n    el.style.height = 'auto';\n    const newHeight = Math.min(el.scrollHeight, 120); // 최대 5줄\n    el.style.height = newHeight + 'px';\n    setTextareaRows(Math.ceil(newHeight / 24));\n  };\n\n  // 추천 질문 클릭\n  const handleSuggestedQuestion = (question) => {\n    setInput(question);\n    textareaRef.current?.focus();\n  };\n\n  // 메시지 전송\n  const handleSend = async () => {\n    if (!input.trim() || !selectedDb) return;\n    \n    const userMessage = { role: 'user', content: input };\n    setMessages(prev => [...prev, userMessage]);\n    setLoading(true);\n    setInput('');\n    setTextareaRows(1);\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n\n    try {\n      const response = await fetch('/nl2sql', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: new URLSearchParams({\n          db_name: selectedDb,\n          prompt: input\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        const assistantMessage = {\n          role: 'assistant',\n          content: data.content || '',\n          sql: data.sql || '',\n          result: data.result || null\n        };\n        setMessages(prev => [...prev, assistantMessage]);\n      } else {\n        throw new Error('요청 실패');\n      }\n    } catch (error) {\n      const errorMessage = {\n        role: 'assistant',\n        content: '죄송합니다. 요청 처리 중 오류가 발생했습니다.',\n        error: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 키보드 이벤트 처리\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // 텍스트 영역 입력 처리\n  const handleInputChange = (e) => {\n    setInput(e.target.value);\n    autoResizeTextarea(e.target);\n  };\n\n  return (\n    <div className=\"chat-container\">\n      {/* 채팅 헤더 */}\n      <div className=\"chat-header\">\n        <div style={{ flexGrow: 1 }}>\n          <label htmlFor=\"db-select\" className=\"prompt-label\">DB 선택</label>\n          <select \n            id=\"db-select\" \n            value={selectedDb || ''} \n            onChange={(e) => onDbChange(e.target.value)}\n          >\n            <option value=\"\">DB를 선택하세요</option>\n            {databases?.map(db => (\n              <option key={db.name} value={db.name}>\n                {db.name}\n              </option>\n            ))}\n          </select>\n        </div>\n        <button \n          onClick={onResetChat} \n          disabled={!selectedDb}\n          className=\"reset-btn\"\n        >\n          대화 초기화\n        </button>\n      </div>\n\n      {/* 채팅 메시지 영역 */}\n      <div className=\"chat-messages\" id=\"chat-messages\">\n        <div className=\"chat-box\">\n          {/* 추천 질문 카드들 (첫 대화 전만 표시) */}\n          {messages.length === 0 && (\n            <div className=\"suggest-cards\">\n              {suggestedQuestions.map((question, index) => (\n                <div \n                  key={index}\n                  className=\"suggest-card\" \n                  onClick={() => handleSuggestedQuestion(question)}\n                >\n                  {question}\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* 메시지들 */}\n          {messages.map((msg, idx) => (\n            <div key={idx} className={msg.role === 'user' ? 'msg-user' : 'msg-ai'}>\n              <div className=\"msg-bubble\">\n                {msg.role === 'user' ? (\n                  <div>{msg.content}</div>\n                ) : (\n                  <>\n                    {msg.content && (\n                      <div style={{ marginBottom: '8px' }} dangerouslySetInnerHTML={{ __html: msg.content }} />\n                    )}\n                    {msg.sql && (\n                      <div className=\"sql-block\">\n                        <b>SQL</b><br />\n                        <pre><code>{msg.sql}</code></pre>\n                      </div>\n                    )}\n                    {msg.result && (\n                      <div className=\"result-block\">\n                        <b>실행 결과</b><br />\n                        {msg.result.headers && msg.result.data ? (\n                          <table>\n                            <thead>\n                              <tr>\n                                {msg.result.headers.map((header, i) => (\n                                  <th key={i}>{header}</th>\n                                ))}\n                              </tr>\n                            </thead>\n                            <tbody>\n                              {msg.result.data.map((row, i) => (\n                                <tr key={i}>\n                                  {row.map((cell, j) => (\n                                    <td key={j}>{cell}</td>\n                                  ))}\n                                </tr>\n                              ))}\n                            </tbody>\n                          </table>\n                        ) : (\n                          <pre><code>{JSON.stringify(msg.result, null, 2)}</code></pre>\n                        )}\n                      </div>\n                    )}\n                    {msg.error && (\n                      <div className=\"error-message\">\n                        <span style={{ color: '#e74c3c' }}>⚠️ {msg.content}</span>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n          ))}\n          \n          {/* 로딩 표시 */}\n          {loading && (\n            <div className=\"msg-ai\">\n              <div className=\"msg-bubble\">\n                <div className=\"loading-indicator\">\n                  <span>AI 응답 생성 중...</span>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* 입력 영역 */}\n      <div className=\"chat-input-area\">\n        <textarea\n          ref={textareaRef}\n          value={input}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          rows={textareaRows}\n          placeholder=\"질문을 입력하세요... (Shift+Enter로 줄바꿈)\"\n          disabled={!selectedDb || loading}\n        />\n        <button \n          onClick={handleSend} \n          disabled={!input.trim() || !selectedDb || loading}\n        >\n          전송\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatComponent; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
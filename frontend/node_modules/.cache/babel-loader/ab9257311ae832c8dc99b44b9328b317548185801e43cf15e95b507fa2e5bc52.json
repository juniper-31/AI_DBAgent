{"ast":null,"code":"var _jsxFileName = \"/Users/bskong/Repository/test/db-agent/frontend/src/components/ChatComponent.js\",\n  _s = $RefreshSig$();\n// ChatComponent.js\n// 자연어→SQL, AI 통합 채팅 컴포넌트\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatComponent({\n  selectedDb,\n  databases,\n  onDbChange\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [textareaRows, setTextareaRows] = useState(1);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const [aiModels, setAiModels] = useState([]);\n  const [selectedAiModel, setSelectedAiModel] = useState('');\n  const [conversations, setConversations] = useState([]); // 대화 목록\n  const [currentConversationId, setCurrentConversationId] = useState(null); // 현재 대화 ID\n  const [newConversationTitle, setNewConversationTitle] = useState(''); // 새 대화 제목\n\n  // 추천 질문들 (카드형)\n  const suggestedQuestions = [{\n    title: '성능 분석',\n    questions: ['오늘 가장 오래 걸린 쿼리 보여줘', '슬로우 쿼리 10개만 보여줘', '테이블별 row 수와 크기 알려줘']\n  }, {\n    title: '데이터 탐색',\n    questions: ['가장 row가 많은 테이블 알려줘', '최근 7일간 생성된 데이터 보여줘', '사용자 테이블의 구조를 설명해줘']\n  }, {\n    title: '시스템 상태',\n    questions: ['현재 활성 연결 수는?', '데이터베이스 크기와 사용량 알려줘', '인덱스 사용 현황을 분석해줘']\n  }];\n\n  // 자동 스크롤\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // DB 선택 변경 시 대화 목록 불러오기\n  useEffect(() => {\n    const fetchConversations = async () => {\n      if (selectedDb) {\n        try {\n          const response = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n          if (response.data.status === 'success') {\n            setConversations(response.data.conversations);\n            // DB 변경 시 현재 대화 초기화\n            setCurrentConversationId(null);\n            setMessages([]);\n          }\n        } catch (error) {\n          console.error('대화 목록을 불러오는데 실패했습니다:', error);\n          setConversations([]);\n        }\n      } else {\n        setConversations([]);\n        setCurrentConversationId(null);\n        setMessages([]);\n      }\n    };\n    fetchConversations();\n  }, [selectedDb]);\n\n  // 현재 대화 ID 변경 시 메시지 불러오기\n  useEffect(() => {\n    const fetchMessages = async () => {\n      if (currentConversationId) {\n        try {\n          const response = await axios.get(`/api/conversations/${currentConversationId}/messages`);\n          if (response.data.status === 'success') {\n            // DB에서 불러온 메시지 형식 변환\n            const formattedMessages = response.data.messages.map(msg => ({\n              role: msg.role,\n              content: msg.content,\n              sql: msg.sql_query,\n              result: msg.sql_result ? JSON.parse(msg.sql_result) : null,\n              timestamp: new Date(msg.timestamp).toLocaleTimeString()\n            }));\n            setMessages(formattedMessages);\n          }\n        } catch (error) {\n          console.error('메시지를 불러오는데 실패했습니다:', error);\n          setMessages([]);\n        }\n      } else {\n        setMessages([]);\n      }\n    };\n    fetchMessages();\n  }, [currentConversationId]);\n\n  // AI 모델 목록 불러오기 (한 번만 실행)\n  useEffect(() => {\n    const fetchAiModels = async () => {\n      try {\n        const openaiRes = await axios.get('/api/openai/keys');\n        const azureOpenAIRes = await axios.get('/api/azure-openai/configs');\n        const geminiRes = await axios.get('/api/gemini/configs');\n        const claudeRes = await axios.get('/api/claude/configs');\n        const allModels = [...openaiRes.data.keys.map(k => ({\n          ...k,\n          type: 'openai'\n        })), ...azureOpenAIRes.data.configs.map(c => ({\n          ...c,\n          type: 'azure_openai'\n        })), ...geminiRes.data.configs.map(c => ({\n          ...c,\n          type: 'gemini'\n        })), ...claudeRes.data.configs.map(c => ({\n          ...c,\n          type: 'claude'\n        }))];\n        setAiModels(allModels);\n        const currentSelected = allModels.find(m => m.is_selected);\n        if (currentSelected) {\n          setSelectedAiModel(currentSelected.name);\n        } else if (allModels.length > 0) {\n          const defaultModel = allModels[0];\n          let selectApiEndpoint = '';\n          if (defaultModel.type === 'openai') selectApiEndpoint = '/api/openai/select';else if (defaultModel.type === 'azure_openai') selectApiEndpoint = '/api/azure-openai/select';else if (defaultModel.type === 'gemini') selectApiEndpoint = '/api/gemini/select';else if (defaultModel.type === 'claude') selectApiEndpoint = '/api/claude/select';\n          if (selectApiEndpoint) {\n            const formData = new FormData();\n            formData.append('name', defaultModel.name);\n            axios.post(selectApiEndpoint, formData).then(() => {\n              setSelectedAiModel(defaultModel.name);\n              console.log(`Default AI model selected: ${defaultModel.name}`);\n            }).catch(error => {\n              console.error('Error selecting default AI model:', error);\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching AI models:', error);\n      }\n    };\n    fetchAiModels();\n  }, []);\n\n  // 텍스트 영역 자동 크기 조정\n  const autoResizeTextarea = el => {\n    el.style.height = 'auto';\n    const newHeight = Math.min(el.scrollHeight, 120); // 최대 5줄\n    el.style.height = newHeight + 'px';\n    setTextareaRows(Math.ceil(newHeight / 24));\n  };\n\n  // 추천 질문 클릭\n  const handleSuggestedQuestion = question => {\n    var _textareaRef$current;\n    setInput(question);\n    (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : _textareaRef$current.focus();\n  };\n\n  // 새 대화 시작\n  const handleNewConversation = async e => {\n    e.preventDefault();\n    if (!newConversationTitle.trim() || !selectedDb) {\n      alert('DB와 대화 제목을 입력해주세요.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('db_name', selectedDb);\n      formData.append('title', newConversationTitle);\n      const response = await axios.post('/api/conversations/new', formData);\n      if (response.data.status === 'success') {\n        setCurrentConversationId(response.data.conversation_id);\n        setNewConversationTitle('');\n        setMessages([]); // 새 대화 시작 시 메시지 초기화\n        // 대화 목록 새로고침\n        const convRes = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n        if (convRes.data.status === 'success') {\n          setConversations(convRes.data.conversations);\n        }\n      }\n    } catch (error) {\n      console.error('새 대화 생성 실패:', error);\n      alert('새 대화 생성에 실패했습니다.');\n    }\n  };\n\n  // 기존 대화 선택\n  const handleSelectConversation = convId => {\n    setCurrentConversationId(convId);\n  };\n\n  // 대화 삭제\n  const handleDeleteConversation = async convId => {\n    if (window.confirm('정말로 이 대화를 삭제하시겠습니까? 모든 메시지가 영구적으로 삭제됩니다.')) {\n      try {\n        await axios.delete(`/api/conversations/${convId}`);\n        // 대화 목록 새로고침\n        const convRes = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n        if (convRes.data.status === 'success') {\n          setConversations(convRes.data.conversations);\n        }\n        if (currentConversationId === convId) {\n          setCurrentConversationId(null);\n          setMessages([]);\n        }\n      } catch (error) {\n        console.error('대화 삭제 실패:', error);\n        alert('대화 삭제에 실패했습니다.');\n      }\n    }\n  };\n\n  // 메시지 전송\n  const handleSend = async () => {\n    if (!input.trim() || !selectedDb) return;\n    if (!selectedAiModel) {\n      alert('먼저 사용할 AI 모델을 선택해주세요.');\n      return;\n    }\n    if (!currentConversationId) {\n      alert('먼저 대화를 시작하거나 기존 대화를 선택해주세요.');\n      return;\n    }\n    const userMessage = {\n      role: 'user',\n      content: input,\n      timestamp: new Date().toLocaleTimeString()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setLoading(true);\n    setInput('');\n    setTextareaRows(1);\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n    try {\n      const formData = new FormData();\n      formData.append('db_name', selectedDb);\n      formData.append('prompt', input);\n      formData.append('conversation_id', currentConversationId); // 대화 ID 전송\n\n      const response = await axios.post('/api/nl2sql', formData);\n      if (response.data.status === 'success') {\n        const data = response.data.message;\n        const assistantMessage = {\n          role: 'assistant',\n          content: data.content || '',\n          sql: data.sql || '',\n          result: data.result || null,\n          timestamp: new Date().toLocaleTimeString()\n        };\n        setMessages(prev => [...prev, assistantMessage]);\n      } else {\n        const errorMessage = {\n          role: 'assistant',\n          content: response.data.error || '알 수 없는 오류 발생',\n          error: true,\n          timestamp: new Date().toLocaleTimeString()\n        };\n        setMessages(prev => [...prev, errorMessage]);\n      }\n    } catch (error) {\n      console.error('요청 처리 중 오류 발생:', error);\n      const errorMessage = {\n        role: 'assistant',\n        content: '죄송합니다. 요청 처리 중 오류가 발생했습니다.',\n        error: true,\n        timestamp: new Date().toLocaleTimeString()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 키보드 이벤트 처리\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // 텍스트 영역 입력 처리\n  const handleInputChange = e => {\n    setInput(e.target.value);\n    autoResizeTextarea(e.target);\n  };\n\n  // 채팅 초기화 (현재 대화의 메시지만 삭제)\n  const handleResetChat = async () => {\n    if (!currentConversationId) return;\n    if (window.confirm('현재 대화의 모든 메시지를 초기화하시겠습니까?')) {\n      try {\n        const formData = new FormData();\n        formData.append('conversation_id', currentConversationId);\n        const response = await axios.post('/api/nl2sql/reset', formData);\n        if (response.data.status === 'success') {\n          setMessages([]);\n          // 대화 목록 새로고침 (업데이트된 updated_at 반영)\n          const convRes = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n          if (convRes.data.status === 'success') {\n            setConversations(convRes.data.conversations);\n          }\n        }\n      } catch (error) {\n        console.error('채팅 초기화 오류:', error);\n        alert('채팅 초기화에 실패했습니다.');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"db-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"db-select\",\n            className: \"prompt-label\",\n            children: \"DB \\uC120\\uD0DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"db-select\",\n            value: selectedDb || '',\n            onChange: e => onDbChange(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"DB\\uB97C \\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"__ALL_DBS__\",\n              children: \"\\uBAA8\\uB4E0 DB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), databases === null || databases === void 0 ? void 0 : databases.map(db => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: db.name,\n              children: db.name\n            }, db.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ai-model-selector ms-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"ai-model-select\",\n            className: \"prompt-label\",\n            children: \"AI \\uBAA8\\uB378 \\uC120\\uD0DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"ai-model-select\",\n            value: selectedAiModel,\n            onChange: async e => {\n              const modelName = e.target.value;\n              const selected = aiModels.find(m => m.name === modelName);\n              if (selected) {\n                let selectApiEndpoint = '';\n                if (selected.type === 'openai') selectApiEndpoint = '/api/openai/select';else if (selected.type === 'azure_openai') selectApiEndpoint = '/api/azure-openai/select';else if (selected.type === 'gemini') selectApiEndpoint = '/api/gemini/select';else if (selected.type === 'claude') selectApiEndpoint = '/api/claude/select';\n                if (selectApiEndpoint) {\n                  try {\n                    const formData = new FormData();\n                    formData.append('name', selected.name);\n                    await axios.post(selectApiEndpoint, formData);\n                    setSelectedAiModel(selected.name);\n                    alert(`${selected.name} AI 모델이 선택되었습니다.`);\n                  } catch (error) {\n                    console.error('Error selecting AI model:', error);\n                    alert('AI 모델 선택에 실패했습니다.');\n                  }\n                }\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"AI \\uBAA8\\uB378 \\uC120\\uD0DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), aiModels.map(model => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: model.name,\n              children: [model.name, \" (\", model.type, \")\"]\n            }, model.name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleResetChat,\n          disabled: !currentConversationId,\n          className: \"btn btn-outline\",\n          title: \"\\uD604\\uC7AC \\uB300\\uD654 \\uCD08\\uAE30\\uD654\",\n          children: \"\\uD83D\\uDD04 \\uD604\\uC7AC \\uB300\\uD654 \\uCD08\\uAE30\\uD654\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      id: \"chat-messages\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-box\",\n        children: [messages.length === 0 && !currentConversationId && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"suggest-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCA1 \\uCD94\\uCC9C \\uC9C8\\uBB38\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"suggest-cards\",\n            children: suggestedQuestions.map((category, categoryIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggest-category\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: category.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"suggest-cards-grid\",\n                children: category.questions.map((question, questionIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"suggest-card\",\n                  onClick: () => handleSuggestedQuestion(question),\n                  children: question\n                }, questionIndex, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 21\n              }, this)]\n            }, categoryIndex, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${msg.role === 'user' ? 'message-user' : 'message-ai'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-role\",\n                children: msg.role === 'user' ? '👤 사용자' : '🤖 AI'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-body\",\n              children: msg.role === 'user' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-message\",\n                children: msg.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ai-message\",\n                children: [msg.content && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ai-response\",\n                  dangerouslySetInnerHTML: {\n                    __html: msg.content\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 25\n                }, this), msg.sql && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"sql-result\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"sql-header\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"sql-label\",\n                      children: \"\\uD83D\\uDD0D \\uC0DD\\uC131\\uB41C SQL\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"sql-code\",\n                    children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                      children: /*#__PURE__*/_jsxDEV(\"code\", {\n                        children: msg.sql\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 465,\n                        columnNumber: 34\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 465,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 25\n                }, this), msg.result && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"query-result\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"result-header\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"result-label\",\n                      children: \"\\uD83D\\uDCCA \\uC2E4\\uD589 \\uACB0\\uACFC\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 472,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"result-content\",\n                    children: msg.result.headers && msg.result.data ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"result-table\",\n                      children: /*#__PURE__*/_jsxDEV(\"table\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                            children: msg.result.headers.map((header, i) => /*#__PURE__*/_jsxDEV(\"th\", {\n                              children: header\n                            }, i, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 481,\n                              columnNumber: 41\n                            }, this))\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 479,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 478,\n                          columnNumber: 35\n                        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                          children: msg.result.data.map((row, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                            children: row.map((cell, j) => /*#__PURE__*/_jsxDEV(\"td\", {\n                              children: cell\n                            }, j, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 489,\n                              columnNumber: 43\n                            }, this))\n                          }, i, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 487,\n                            columnNumber: 39\n                          }, this))\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 485,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 477,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 476,\n                      columnNumber: 31\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"result-text\",\n                      children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                        children: /*#__PURE__*/_jsxDEV(\"code\", {\n                          children: JSON.stringify(msg.result, null, 2)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 498,\n                          columnNumber: 38\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 498,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 497,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 474,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 25\n                }, this), msg.error && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"error-message\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"error-icon\",\n                    children: \"\\u26A0\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"error-text\",\n                    children: msg.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message message-ai\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-role\",\n                children: \"\\uD83E\\uDD16 AI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: new Date().toLocaleTimeString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"loading-dots\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 528,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 529,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 530,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"AI\\uAC00 \\uC751\\uB2F5\\uC744 \\uC0DD\\uC131\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }, this), !currentConversationId && messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-conversation-selected\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC0C8 \\uB300\\uD654\\uB97C \\uC2DC\\uC791\\uD558\\uAC70\\uB098 \\uC67C\\uCABD\\uC5D0\\uC11C \\uAE30\\uC874 \\uB300\\uD654\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: textareaRef,\n          value: input,\n          onChange: handleInputChange,\n          onKeyDown: handleKeyDown,\n          rows: textareaRows,\n          placeholder: \"\\uC790\\uC5F0\\uC5B4\\uB85C \\uC9C8\\uBB38\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694... (Shift+Enter\\uB85C \\uC904\\uBC14\\uAFC8)\",\n          disabled: !selectedDb || loading || !selectedAiModel || !currentConversationId // AI 모델 및 대화 선택 여부로 disabled 제어\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSend,\n          disabled: !input.trim() || !selectedDb || loading || !selectedAiModel || !currentConversationId // AI 모델 및 대화 선택 여부로 disabled 제어\n          ,\n          className: \"send-button\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"send-icon\",\n            children: \"\\uD83D\\uDCE4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }, this), !selectedAiModel && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-warning\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u26A0\\uFE0F \\uC0AC\\uC6A9\\uD560 AI \\uBAA8\\uB378\\uC744 \\uBA3C\\uC800 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 11\n      }, this), !currentConversationId && selectedAiModel && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-warning\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u26A0\\uFE0F \\uB300\\uD654\\uB97C \\uC2DC\\uC791\\uD558\\uAC70\\uB098 \\uAE30\\uC874 \\uB300\\uD654\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 337,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatComponent, \"Vw4Qy4/BCBk1zmO9I3v9NqfkkOk=\");\n_c = ChatComponent;\nexport default ChatComponent;\nvar _c;\n$RefreshReg$(_c, \"ChatComponent\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","ChatComponent","selectedDb","databases","onDbChange","_s","messages","setMessages","input","setInput","loading","setLoading","textareaRows","setTextareaRows","messagesEndRef","textareaRef","aiModels","setAiModels","selectedAiModel","setSelectedAiModel","conversations","setConversations","currentConversationId","setCurrentConversationId","newConversationTitle","setNewConversationTitle","suggestedQuestions","title","questions","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","fetchConversations","response","get","data","status","error","console","fetchMessages","formattedMessages","map","msg","role","content","sql","sql_query","result","sql_result","JSON","parse","timestamp","Date","toLocaleTimeString","fetchAiModels","openaiRes","azureOpenAIRes","geminiRes","claudeRes","allModels","keys","k","type","configs","c","currentSelected","find","m","is_selected","name","length","defaultModel","selectApiEndpoint","formData","FormData","append","post","then","log","catch","autoResizeTextarea","el","style","height","newHeight","Math","min","scrollHeight","ceil","handleSuggestedQuestion","question","_textareaRef$current","focus","handleNewConversation","e","preventDefault","trim","alert","conversation_id","convRes","handleSelectConversation","convId","handleDeleteConversation","window","confirm","delete","handleSend","userMessage","prev","message","assistantMessage","errorMessage","handleKeyDown","key","shiftKey","handleInputChange","target","value","handleResetChat","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","db","modelName","selected","model","onClick","disabled","category","categoryIndex","questionIndex","idx","dangerouslySetInnerHTML","__html","headers","header","i","row","cell","j","stringify","ref","onKeyDown","rows","placeholder","_c","$RefreshReg$"],"sources":["/Users/bskong/Repository/test/db-agent/frontend/src/components/ChatComponent.js"],"sourcesContent":["// ChatComponent.js\n// 자연어→SQL, AI 통합 채팅 컴포넌트\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nfunction ChatComponent({ selectedDb, databases, onDbChange }) {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [textareaRows, setTextareaRows] = useState(1);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  const [aiModels, setAiModels] = useState([]);\n  const [selectedAiModel, setSelectedAiModel] = useState('');\n\n  const [conversations, setConversations] = useState([]); // 대화 목록\n  const [currentConversationId, setCurrentConversationId] = useState(null); // 현재 대화 ID\n  const [newConversationTitle, setNewConversationTitle] = useState(''); // 새 대화 제목\n\n  // 추천 질문들 (카드형)\n  const suggestedQuestions = [\n    {\n      title: '성능 분석',\n      questions: [\n        '오늘 가장 오래 걸린 쿼리 보여줘',\n        '슬로우 쿼리 10개만 보여줘',\n        '테이블별 row 수와 크기 알려줘'\n      ]\n    },\n    {\n      title: '데이터 탐색',\n      questions: [\n        '가장 row가 많은 테이블 알려줘',\n        '최근 7일간 생성된 데이터 보여줘',\n        '사용자 테이블의 구조를 설명해줘'\n      ]\n    },\n    {\n      title: '시스템 상태',\n      questions: [\n        '현재 활성 연결 수는?',\n        '데이터베이스 크기와 사용량 알려줘',\n        '인덱스 사용 현황을 분석해줘'\n      ]\n    }\n  ];\n\n  // 자동 스크롤\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // DB 선택 변경 시 대화 목록 불러오기\n  useEffect(() => {\n    const fetchConversations = async () => {\n      if (selectedDb) {\n        try {\n          const response = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n          if (response.data.status === 'success') {\n            setConversations(response.data.conversations);\n            // DB 변경 시 현재 대화 초기화\n            setCurrentConversationId(null);\n            setMessages([]);\n          }\n        } catch (error) {\n          console.error('대화 목록을 불러오는데 실패했습니다:', error);\n          setConversations([]);\n        }\n      } else {\n        setConversations([]);\n        setCurrentConversationId(null);\n        setMessages([]);\n      }\n    };\n\n    fetchConversations();\n  }, [selectedDb]);\n\n  // 현재 대화 ID 변경 시 메시지 불러오기\n  useEffect(() => {\n    const fetchMessages = async () => {\n      if (currentConversationId) {\n        try {\n          const response = await axios.get(`/api/conversations/${currentConversationId}/messages`);\n          if (response.data.status === 'success') {\n            // DB에서 불러온 메시지 형식 변환\n            const formattedMessages = response.data.messages.map(msg => ({\n              role: msg.role,\n              content: msg.content,\n              sql: msg.sql_query,\n              result: msg.sql_result ? JSON.parse(msg.sql_result) : null,\n              timestamp: new Date(msg.timestamp).toLocaleTimeString()\n            }));\n            setMessages(formattedMessages);\n          }\n        } catch (error) {\n          console.error('메시지를 불러오는데 실패했습니다:', error);\n          setMessages([]);\n        }\n      } else {\n        setMessages([]);\n      }\n    };\n    fetchMessages();\n  }, [currentConversationId]);\n\n  // AI 모델 목록 불러오기 (한 번만 실행)\n  useEffect(() => {\n    const fetchAiModels = async () => {\n      try {\n        const openaiRes = await axios.get('/api/openai/keys');\n        const azureOpenAIRes = await axios.get('/api/azure-openai/configs');\n        const geminiRes = await axios.get('/api/gemini/configs');\n        const claudeRes = await axios.get('/api/claude/configs');\n\n        const allModels = [\n          ...openaiRes.data.keys.map(k => ({ ...k, type: 'openai' })),\n          ...azureOpenAIRes.data.configs.map(c => ({ ...c, type: 'azure_openai' })),\n          ...geminiRes.data.configs.map(c => ({ ...c, type: 'gemini' })),\n          ...claudeRes.data.configs.map(c => ({ ...c, type: 'claude' })),\n        ];\n        setAiModels(allModels);\n\n        const currentSelected = allModels.find(m => m.is_selected);\n        if (currentSelected) {\n          setSelectedAiModel(currentSelected.name);\n        } else if (allModels.length > 0) {\n          const defaultModel = allModels[0];\n          let selectApiEndpoint = '';\n          if (defaultModel.type === 'openai') selectApiEndpoint = '/api/openai/select';\n          else if (defaultModel.type === 'azure_openai') selectApiEndpoint = '/api/azure-openai/select';\n          else if (defaultModel.type === 'gemini') selectApiEndpoint = '/api/gemini/select';\n          else if (defaultModel.type === 'claude') selectApiEndpoint = '/api/claude/select';\n\n          if (selectApiEndpoint) {\n            const formData = new FormData();\n            formData.append('name', defaultModel.name);\n            axios.post(selectApiEndpoint, formData)\n              .then(() => {\n                setSelectedAiModel(defaultModel.name);\n                console.log(`Default AI model selected: ${defaultModel.name}`);\n              })\n              .catch(error => {\n                console.error('Error selecting default AI model:', error);\n              });\n          }\n        }\n\n      } catch (error) {\n        console.error('Error fetching AI models:', error);\n      }\n    };\n    fetchAiModels();\n  }, []);\n\n  // 텍스트 영역 자동 크기 조정\n  const autoResizeTextarea = (el) => {\n    el.style.height = 'auto';\n    const newHeight = Math.min(el.scrollHeight, 120); // 최대 5줄\n    el.style.height = newHeight + 'px';\n    setTextareaRows(Math.ceil(newHeight / 24));\n  };\n\n  // 추천 질문 클릭\n  const handleSuggestedQuestion = (question) => {\n    setInput(question);\n    textareaRef.current?.focus();\n  };\n\n  // 새 대화 시작\n  const handleNewConversation = async (e) => {\n    e.preventDefault();\n    if (!newConversationTitle.trim() || !selectedDb) {\n      alert('DB와 대화 제목을 입력해주세요.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('db_name', selectedDb);\n      formData.append('title', newConversationTitle);\n      const response = await axios.post('/api/conversations/new', formData);\n      if (response.data.status === 'success') {\n        setCurrentConversationId(response.data.conversation_id);\n        setNewConversationTitle('');\n        setMessages([]); // 새 대화 시작 시 메시지 초기화\n        // 대화 목록 새로고침\n        const convRes = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n        if (convRes.data.status === 'success') {\n          setConversations(convRes.data.conversations);\n        }\n      }\n    } catch (error) {\n      console.error('새 대화 생성 실패:', error);\n      alert('새 대화 생성에 실패했습니다.');\n    }\n  };\n\n  // 기존 대화 선택\n  const handleSelectConversation = (convId) => {\n    setCurrentConversationId(convId);\n  };\n\n  // 대화 삭제\n  const handleDeleteConversation = async (convId) => {\n    if (window.confirm('정말로 이 대화를 삭제하시겠습니까? 모든 메시지가 영구적으로 삭제됩니다.')) {\n      try {\n        await axios.delete(`/api/conversations/${convId}`);\n        // 대화 목록 새로고침\n        const convRes = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n        if (convRes.data.status === 'success') {\n          setConversations(convRes.data.conversations);\n        }\n        if (currentConversationId === convId) {\n          setCurrentConversationId(null);\n          setMessages([]);\n        }\n      } catch (error) {\n        console.error('대화 삭제 실패:', error);\n        alert('대화 삭제에 실패했습니다.');\n      }\n    }\n  };\n\n  // 메시지 전송\n  const handleSend = async () => {\n    if (!input.trim() || !selectedDb) return;\n    \n    if (!selectedAiModel) {\n      alert('먼저 사용할 AI 모델을 선택해주세요.');\n      return;\n    }\n\n    if (!currentConversationId) {\n      alert('먼저 대화를 시작하거나 기존 대화를 선택해주세요.');\n      return;\n    }\n    \n    const userMessage = { \n      role: 'user', \n      content: input,\n      timestamp: new Date().toLocaleTimeString()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setLoading(true);\n    setInput('');\n    setTextareaRows(1);\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('db_name', selectedDb);\n      formData.append('prompt', input);\n      formData.append('conversation_id', currentConversationId); // 대화 ID 전송\n\n      const response = await axios.post('/api/nl2sql', formData);\n\n      if (response.data.status === 'success') {\n        const data = response.data.message;\n        const assistantMessage = {\n          role: 'assistant',\n          content: data.content || '',\n          sql: data.sql || '',\n          result: data.result || null,\n          timestamp: new Date().toLocaleTimeString()\n        };\n        setMessages(prev => [...prev, assistantMessage]);\n      } else {\n        const errorMessage = {\n          role: 'assistant',\n          content: response.data.error || '알 수 없는 오류 발생',\n          error: true,\n          timestamp: new Date().toLocaleTimeString()\n        };\n        setMessages(prev => [...prev, errorMessage]);\n      }\n    } catch (error) {\n      console.error('요청 처리 중 오류 발생:', error);\n      const errorMessage = {\n        role: 'assistant',\n        content: '죄송합니다. 요청 처리 중 오류가 발생했습니다.',\n        error: true,\n        timestamp: new Date().toLocaleTimeString()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 키보드 이벤트 처리\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // 텍스트 영역 입력 처리\n  const handleInputChange = (e) => {\n    setInput(e.target.value);\n    autoResizeTextarea(e.target);\n  };\n\n  // 채팅 초기화 (현재 대화의 메시지만 삭제)\n  const handleResetChat = async () => {\n    if (!currentConversationId) return;\n    \n    if (window.confirm('현재 대화의 모든 메시지를 초기화하시겠습니까?')) {\n      try {\n        const formData = new FormData();\n        formData.append('conversation_id', currentConversationId);\n        const response = await axios.post('/api/nl2sql/reset', formData);\n        \n        if (response.data.status === 'success') {\n          setMessages([]);\n          // 대화 목록 새로고침 (업데이트된 updated_at 반영)\n          const convRes = await axios.get(`/api/conversations?db_name=${selectedDb}`);\n          if (convRes.data.status === 'success') {\n            setConversations(convRes.data.conversations);\n          }\n        }\n      } catch (error) {\n        console.error('채팅 초기화 오류:', error);\n        alert('채팅 초기화에 실패했습니다.');\n      }\n    }\n  };\n\n  return (\n    <div className=\"chat-container\">\n      {/* 채팅 헤더 */}\n      <div className=\"chat-header\">\n        <div className=\"header-left\">\n          <div className=\"db-selector\">\n            <label htmlFor=\"db-select\" className=\"prompt-label\">DB 선택</label>\n            <select \n              id=\"db-select\" \n              value={selectedDb || ''} \n              onChange={(e) => onDbChange(e.target.value)}\n            >\n              <option value=\"\">DB를 선택하세요</option>\n              <option value=\"__ALL_DBS__\">모든 DB</option>\n              {databases?.map(db => (\n                <option key={db.name} value={db.name}>\n                  {db.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          {/* AI 모델 선택 드롭다운 */}\n          <div className=\"ai-model-selector ms-3\">\n            <label htmlFor=\"ai-model-select\" className=\"prompt-label\">AI 모델 선택</label>\n            <select \n              id=\"ai-model-select\" \n              value={selectedAiModel} \n              onChange={async (e) => {\n                const modelName = e.target.value;\n                const selected = aiModels.find(m => m.name === modelName);\n                if (selected) {\n                  let selectApiEndpoint = '';\n                  if (selected.type === 'openai') selectApiEndpoint = '/api/openai/select';\n                  else if (selected.type === 'azure_openai') selectApiEndpoint = '/api/azure-openai/select';\n                  else if (selected.type === 'gemini') selectApiEndpoint = '/api/gemini/select';\n                  else if (selected.type === 'claude') selectApiEndpoint = '/api/claude/select';\n\n                  if (selectApiEndpoint) {\n                    try {\n                      const formData = new FormData();\n                      formData.append('name', selected.name);\n                      await axios.post(selectApiEndpoint, formData);\n                      setSelectedAiModel(selected.name);\n                      alert(`${selected.name} AI 모델이 선택되었습니다.`);\n                    } catch (error) {\n                      console.error('Error selecting AI model:', error);\n                      alert('AI 모델 선택에 실패했습니다.');\n                    }\n                  }\n                }\n              }}\n            >\n              <option value=\"\">AI 모델 선택</option>\n              {aiModels.map(model => (\n                <option key={model.name} value={model.name}>\n                  {model.name} ({model.type})\n                </option>\n              ))}\n            </select>\n          </div>\n\n        </div>\n        \n        <div className=\"header-actions\">\n          <button \n            onClick={handleResetChat} \n            disabled={!currentConversationId}\n            className=\"btn btn-outline\"\n            title=\"현재 대화 초기화\"\n          >\n            🔄 현재 대화 초기화\n          </button>\n        </div>\n      </div>\n\n      {/* 채팅 메시지 영역 */}\n      <div className=\"chat-messages\" id=\"chat-messages\">\n        <div className=\"chat-box\">\n          {/* 추천 질문 카드들 (첫 대화 전만 표시) */}\n          {messages.length === 0 && !currentConversationId && (\n            <div className=\"suggest-section\">\n              <h3>💡 추천 질문</h3>\n              <div className=\"suggest-cards\">\n                {suggestedQuestions.map((category, categoryIndex) => (\n                  <div key={categoryIndex} className=\"suggest-category\">\n                    <h4>{category.title}</h4>\n                    <div className=\"suggest-cards-grid\">\n                      {category.questions.map((question, questionIndex) => (\n                        <div \n                          key={questionIndex}\n                          className=\"suggest-card\" \n                          onClick={() => handleSuggestedQuestion(question)}\n                        >\n                          {question}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* 메시지들 */}\n          {messages.map((msg, idx) => (\n            <div key={idx} className={`message ${msg.role === 'user' ? 'message-user' : 'message-ai'}`}>\n              <div className=\"message-content\">\n                <div className=\"message-header\">\n                  <span className=\"message-role\">\n                    {msg.role === 'user' ? '👤 사용자' : '🤖 AI'}\n                  </span>\n                  <span className=\"message-time\">{msg.timestamp}</span>\n                </div>\n                \n                <div className=\"message-body\">\n                  {msg.role === 'user' ? (\n                    <div className=\"user-message\">{msg.content}</div>\n                  ) : (\n                    <div className=\"ai-message\">\n                      {msg.content && (\n                        <div className=\"ai-response\" dangerouslySetInnerHTML={{ __html: msg.content }} />\n                      )}\n                      {msg.sql && (\n                        <div className=\"sql-result\">\n                          <div className=\"sql-header\">\n                            <span className=\"sql-label\">🔍 생성된 SQL</span>\n                          </div>\n                          <div className=\"sql-code\">\n                            <pre><code>{msg.sql}</code></pre>\n                          </div>\n                        </div>\n                      )}\n                      {msg.result && (\n                        <div className=\"query-result\">\n                          <div className=\"result-header\">\n                            <span className=\"result-label\">📊 실행 결과</span>\n                          </div>\n                          <div className=\"result-content\">\n                            {msg.result.headers && msg.result.data ? (\n                              <div className=\"result-table\">\n                                <table>\n                                  <thead>\n                                    <tr>\n                                      {msg.result.headers.map((header, i) => (\n                                        <th key={i}>{header}</th>\n                                      ))}\n                                    </tr>\n                                  </thead>\n                                  <tbody>\n                                    {msg.result.data.map((row, i) => (\n                                      <tr key={i}>\n                                        {row.map((cell, j) => (\n                                          <td key={j}>{cell}</td>\n                                        ))}\n                                      </tr>\n                                    ))}\n                                  </tbody>\n                                </table>\n                              </div>\n                            ) : (\n                              <div className=\"result-text\">\n                                <pre><code>{JSON.stringify(msg.result, null, 2)}</code></pre>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                      {msg.error && (\n                        <div className=\"error-message\">\n                          <span className=\"error-icon\">⚠️</span>\n                          <span className=\"error-text\">{msg.content}</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n            \n          {/* 로딩 표시 */}\n          {loading && (\n            <div className=\"message message-ai\">\n              <div className=\"message-content\">\n                <div className=\"message-header\">\n                  <span className=\"message-role\">🤖 AI</span>\n                  <span className=\"message-time\">{new Date().toLocaleTimeString()}</span>\n                </div>\n                <div className=\"message-body\">\n                  <div className=\"loading-message\">\n                    <div className=\"loading-dots\">\n                      <span></span>\n                      <span></span>\n                      <span></span>\n                    </div>\n                    <span>AI가 응답을 생성하고 있습니다...</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {!currentConversationId && messages.length === 0 && (\n            <div className=\"no-conversation-selected\">\n              <p>새 대화를 시작하거나 왼쪽에서 기존 대화를 선택해주세요.</p>\n            </div>\n          )}\n        </div>\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* 입력 영역 */}\n      <div className=\"chat-input-area\">\n        <div className=\"input-container\">\n          <textarea\n            ref={textareaRef}\n            value={input}\n            onChange={handleInputChange}\n            onKeyDown={handleKeyDown}\n            rows={textareaRows}\n            placeholder=\"자연어로 질문을 입력하세요... (Shift+Enter로 줄바꿈)\"\n            disabled={!selectedDb || loading || !selectedAiModel || !currentConversationId} // AI 모델 및 대화 선택 여부로 disabled 제어\n          />\n          <button \n            onClick={handleSend} \n            disabled={!input.trim() || !selectedDb || loading || !selectedAiModel || !currentConversationId} // AI 모델 및 대화 선택 여부로 disabled 제어\n            className=\"send-button\"\n          >\n            <span className=\"send-icon\">📤</span>\n          </button>\n        </div>\n        \n        {!selectedAiModel && (\n          <div className=\"input-warning\">\n            <span>⚠️ 사용할 AI 모델을 먼저 선택해주세요.</span>\n          </div>\n        )}\n        {!currentConversationId && selectedAiModel && (\n          <div className=\"input-warning\">\n            <span>⚠️ 대화를 시작하거나 기존 대화를 선택해주세요.</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ChatComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}